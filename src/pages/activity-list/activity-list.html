<!--
  Generated template for the ActivityList page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->

<ion-header no-border>
  <ion-searchbar (ionInput)="getActsBySearch($event)"></ion-searchbar>
</ion-header>
<ion-content>
  <ion-spinner name="dots" *ngIf="isLoadingActs"></ion-spinner>
  <ion-row class="activity-container">
    <ion-col>
      <ion-content>
        <ion-item *ngFor="let activity of displayActs" (click)="setCurrentActivity(activity)" [ngClass]="{'current-activity':activity.isActive}">
          <!-- <ion-card-header> -->
          <ion-note>{{activity["PROJACT"] +" - "+ activity["WBS"] }}</ion-note>
          {{activity["ACTDES"]}}
          <ion-badge item-end>{{activity.subActivities.length>0? activity.subActivities.length : ""}}</ion-badge>
          <!-- </ion-card-header> -->
          <!-- <ion-card-content *ngIf="activity.subActivities.length>0">
         
        </ion-card-content> -->

        </ion-item>
      </ion-content>
    </ion-col>
    <ion-col class="sub-acts-container" col-md-8 col-12>
      <ion-content>
        <ion-grid>
          <ion-row>
            <ion-col col-12 col-lg-4>
              <ion-card-header [style.backgroundColor]="'#2D5C7F'">לביצוע</ion-card-header>
              <ion-card *ngFor="let subAct of currentAct.subActOther" [style.borderRightColor]="getSubActColor(subAct)" class="sub-activity"
                padding (touchstart)="onmouseover(subAct)" (mouseenter)="onmouseover(subAct)" (mouseleave)="onmouseout(subAct)">
                <ion-note class="activity-id">{{subAct["PROJACT"]+" - "+subAct["WBS"]}}</ion-note>
                <h4>{{subAct["ACTDES"]}}</h4>
                <p>{{subAct["STEPSTATUSDES"]}}</p>
                <activity-options [activity]="subAct" [parentActivity]="currentAct" *ngIf="subAct.showOpts"></activity-options>
              </ion-card>
            </ion-col>
            <ion-col col-12 col-lg-4>
              <ion-card-header [style.backgroundColor]="'#F38181'">QA</ion-card-header>
              <ion-card *ngFor="let subAct of currentAct.subActQA" [style.borderRightColor]="getSubActColor(subAct)" class="sub-activity"
                padding (touchstart)="onmouseover(subAct)" (mouseenter)="onmouseover(subAct)" (mouseleave)="onmouseout(subAct)">
                <ion-note>{{subAct["PROJACT"]+" - "+subAct["WBS"]}}</ion-note>
                <h4>{{subAct["ACTDES"]}}</h4>
                <p>{{subAct["STEPSTATUSDES"]}}</p>
                <activity-options [activity]="subAct" [parentActivity]="currentAct" *ngIf="subAct.showOpts"></activity-options>
              </ion-card>
            </ion-col>
            <ion-col col-12 col-lg-4>
              <ion-card-header [style.backgroundColor]="'#28CC9E'">בוצעה</ion-card-header>
              <ion-card *ngFor="let subAct of currentAct.subActDone" [style.borderRightColor]="getSubActColor(subAct)" class="sub-activity"
                padding (touchstart)="onmouseover(subAct)" (mouseenter)="onmouseover(subAct)" (mouseleave)="onmouseout(subAct)">
                <ion-note>{{subAct["PROJACT"]+" - "+subAct["WBS"]}}</ion-note>
                <h4>{{subAct["ACTDES"]}}</h4>
                <p>{{subAct["STEPSTATUSDES"]}}</p>
              </ion-card>
            </ion-col>

          </ion-row>
        </ion-grid>
      </ion-content>
    </ion-col>

  </ion-row>

</ion-content>